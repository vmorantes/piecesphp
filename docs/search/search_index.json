{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Instalaci\u00f3n de entorno Entorno LAMP Apache2 PHP 7.3 MariaDB 10.5 Entorno HestiaCP HestiaCP Entorno Tomcat 8 con SSL Tomcat PiecesPHP","title":"Home"},{"location":"#instalacion-de-entorno","text":"","title":"Instalaci\u00f3n de entorno"},{"location":"#entorno-lamp","text":"Apache2 PHP 7.3 MariaDB 10.5","title":"Entorno LAMP"},{"location":"#entorno-hestiacp","text":"HestiaCP","title":"Entorno HestiaCP"},{"location":"#entorno-tomcat-8-con-ssl","text":"Tomcat","title":"Entorno Tomcat 8 con SSL"},{"location":"#piecesphp","text":"","title":"PiecesPHP"},{"location":"hestiacp/","text":"HestiaCP: Ubuntu 20 HestiaCP Algunos paquetes sudo apt install curl zip unzip openssl git wget Variables export HESTIA_DOMAIN=\"sample.com\" export HESTIA_EMAIL=\"admin@sample.com\" export HESTIA_PASSWORD=\"hestiacp8083pass\" export HESTIA_PHP_VERSION_MODULES=\"*\" Instalaci\u00f3n #Descargar wget https://raw.githubusercontent.com/hestiacp/hestiacp/release/install/hst-install.sh #Instalar bash hst-install.sh --apache yes --nginx yes --phpfpm yes --multiphp yes --vsftpd yes --proftpd no --named yes --mysql yes --postgresql no --exim yes --dovecot yes --clamav yes --spamassassin yes --iptables yes --fail2ban yes --quota yes --api yes --lang en --interactive yes --hostname $HESTIA_DOMAIN --email $HESTIA_EMAIL --password $HESTIA_PASSWORD Nota: Puede ver las opciones en la documentaci\u00f3n de HestiaCP M\u00f3dulos PHP y Apache #Instalar m\u00f3dulos sudo apt install php$HESTIA_PHP_VERSION_MODULES-{common,pdo,xml,ctype,mbstring,fileinfo,gd,mysqli,sqlite3,zip,xsl,xmlwriter,xmlreader,curl,mcrypt} #M\u00f3dulos apache sudo a2enmod rewrite headers ssl #Reiniciar apache sudo service apache2 restart Configuraci\u00f3n de MariaDB Puede seguir los pasos ac\u00e1: MariaDB Instalar Composer (globalmente) cd ~ php -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\" php composer-setup.php php -r \"unlink('composer-setup.php');\" mv composer.phar /usr/local/bin/composer PHPMyAdmin Puede seguir los pasos ac\u00e1: PHPMyAdmin Adminer (alternativa ligera a PHPMyAdmin) Puede seguir los pasos ac\u00e1: Adminer Otras configuraciones de HestiaCP Configuraciones de PHP max_execution_time: 600 max_input_time: 600 post_max_size: 20M upload_max_filesize: 20M memory_limit: 200M","title":"Contenido"},{"location":"hestiacp/#hestiacp","text":"Ubuntu 20 HestiaCP","title":"HestiaCP:"},{"location":"hestiacp/#algunos-paquetes","text":"sudo apt install curl zip unzip openssl git wget","title":"Algunos paquetes"},{"location":"hestiacp/#variables","text":"export HESTIA_DOMAIN=\"sample.com\" export HESTIA_EMAIL=\"admin@sample.com\" export HESTIA_PASSWORD=\"hestiacp8083pass\" export HESTIA_PHP_VERSION_MODULES=\"*\"","title":"Variables"},{"location":"hestiacp/#instalacion","text":"#Descargar wget https://raw.githubusercontent.com/hestiacp/hestiacp/release/install/hst-install.sh #Instalar bash hst-install.sh --apache yes --nginx yes --phpfpm yes --multiphp yes --vsftpd yes --proftpd no --named yes --mysql yes --postgresql no --exim yes --dovecot yes --clamav yes --spamassassin yes --iptables yes --fail2ban yes --quota yes --api yes --lang en --interactive yes --hostname $HESTIA_DOMAIN --email $HESTIA_EMAIL --password $HESTIA_PASSWORD Nota: Puede ver las opciones en la documentaci\u00f3n de HestiaCP","title":"Instalaci\u00f3n"},{"location":"hestiacp/#modulos-php-y-apache","text":"#Instalar m\u00f3dulos sudo apt install php$HESTIA_PHP_VERSION_MODULES-{common,pdo,xml,ctype,mbstring,fileinfo,gd,mysqli,sqlite3,zip,xsl,xmlwriter,xmlreader,curl,mcrypt} #M\u00f3dulos apache sudo a2enmod rewrite headers ssl #Reiniciar apache sudo service apache2 restart","title":"M\u00f3dulos PHP y Apache"},{"location":"hestiacp/#configuracion-de-mariadb","text":"Puede seguir los pasos ac\u00e1: MariaDB","title":"Configuraci\u00f3n de MariaDB"},{"location":"hestiacp/#instalar-composer-globalmente","text":"cd ~ php -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\" php composer-setup.php php -r \"unlink('composer-setup.php');\" mv composer.phar /usr/local/bin/composer","title":"Instalar Composer (globalmente)"},{"location":"hestiacp/#phpmyadmin","text":"Puede seguir los pasos ac\u00e1: PHPMyAdmin","title":"PHPMyAdmin"},{"location":"hestiacp/#adminer-alternativa-ligera-a-phpmyadmin","text":"Puede seguir los pasos ac\u00e1: Adminer","title":"Adminer (alternativa ligera a PHPMyAdmin)"},{"location":"hestiacp/#otras-configuraciones-de-hestiacp","text":"","title":"Otras configuraciones de HestiaCP"},{"location":"hestiacp/#configuraciones-de-php","text":"max_execution_time: 600 max_input_time: 600 post_max_size: 20M upload_max_filesize: 20M memory_limit: 200M","title":"Configuraciones de PHP"},{"location":"lamp/","text":"LAMP Ubuntu 20 Apache2 PHP 7.3 MariaDB 10.5 Contenido Apache2 PHP MariaDB Extras PHPMyAdmin Adminer (alternativa ligera a PHPMyAdmin) SSL con Lets Encrypt (Probado en Debian 9) Virtual Hosts - Soporte para dominios (Probado en Debian 9)","title":"LAMP"},{"location":"lamp/#lamp","text":"Ubuntu 20 Apache2 PHP 7.3 MariaDB 10.5","title":"LAMP"},{"location":"lamp/#contenido","text":"","title":"Contenido"},{"location":"lamp/#apache2","text":"","title":"Apache2"},{"location":"lamp/#php","text":"","title":"PHP"},{"location":"lamp/#mariadb","text":"","title":"MariaDB"},{"location":"lamp/#extras","text":"","title":"Extras"},{"location":"lamp/#phpmyadmin","text":"","title":"PHPMyAdmin"},{"location":"lamp/#adminer-alternativa-ligera-a-phpmyadmin","text":"","title":"Adminer (alternativa ligera a PHPMyAdmin)"},{"location":"lamp/#ssl-con-lets-encrypt-probado-en-debian-9","text":"","title":"SSL con Lets Encrypt (Probado en Debian 9)"},{"location":"lamp/#virtual-hosts-soporte-para-dominios-probado-en-debian-9","text":"","title":"Virtual Hosts - Soporte para dominios (Probado en Debian 9)"},{"location":"lamp/content/Adminer/","text":"Adminer 4.7.7 Ubuntu 20 Adminer 4.7.7 Instalaci\u00f3n # Moverse al directorio de usuario cd ~ #Configurar algunas variables \u00fatiles ###La carpeta p\u00fablica export CARPETA_DE_INSTALACION=\"/var/www/html\" #Crear carpeta de adminer sudo mkdir $CARPETA_DE_INSTALACION/adminer #Moverse a carpeta de instalaci\u00f3n cd $CARPETA_DE_INSTALACION/adminer #Descargar sudo git clone https://vmorantes@bitbucket.org/vmorantes/util-adminer.git $CARPETA_DE_INSTALACION/adminer #Remover repositorio sudo rm -Rf $CARPETA_DE_INSTALACION/adminer/.git #En caso de querer permitir el inicio sin contrase\u00f1a (no recomendado), hacer lo siguiente ##Cambiar el valor de la constante _DEV_MODE_ por true sudo nano $CARPETA_DE_INSTALACION/adminer/index.php","title":"Adminer"},{"location":"lamp/content/Adminer/#adminer-477","text":"Ubuntu 20 Adminer 4.7.7","title":"Adminer 4.7.7"},{"location":"lamp/content/Adminer/#instalacion","text":"# Moverse al directorio de usuario cd ~ #Configurar algunas variables \u00fatiles ###La carpeta p\u00fablica export CARPETA_DE_INSTALACION=\"/var/www/html\" #Crear carpeta de adminer sudo mkdir $CARPETA_DE_INSTALACION/adminer #Moverse a carpeta de instalaci\u00f3n cd $CARPETA_DE_INSTALACION/adminer #Descargar sudo git clone https://vmorantes@bitbucket.org/vmorantes/util-adminer.git $CARPETA_DE_INSTALACION/adminer #Remover repositorio sudo rm -Rf $CARPETA_DE_INSTALACION/adminer/.git #En caso de querer permitir el inicio sin contrase\u00f1a (no recomendado), hacer lo siguiente ##Cambiar el valor de la constante _DEV_MODE_ por true sudo nano $CARPETA_DE_INSTALACION/adminer/index.php","title":"Instalaci\u00f3n"},{"location":"lamp/content/Apache/","text":"Instalaci\u00f3n de Apache2 Ubuntu 20 Apache2 Intalaci\u00f3n #Moverse al directorio de usuario cd ~ #Instalar apache sudo apt install apache2 #Activar algunos m\u00f3dulos sudo a2enmod rewrite headers ssl #Activar soporte para el puerto SSL sudo a2ensite default-ssl.conf #Reiniciar sudo service apache2 restart #Paquetes \u00fatiles para el entorno sudo apt install curl zip unzip openssl git wget Configuraciones generales #Mover a carpeta de apache cd /etc/apache2/ #Respaldar archivo de configuraci\u00f3n por defecto cp apache2.conf apache2.conf.bk #Permitir .htaccess sudo nano apache.conf ### En la configuraci\u00f3n de Directory /var/www/ cambiar AllowOverride None por AllowOverride All ### Guardar y reinicias servidor sudo service apache2 restart","title":"Apache2"},{"location":"lamp/content/Apache/#instalacion-de-apache2","text":"Ubuntu 20 Apache2","title":"Instalaci\u00f3n de Apache2"},{"location":"lamp/content/Apache/#intalacion","text":"#Moverse al directorio de usuario cd ~ #Instalar apache sudo apt install apache2 #Activar algunos m\u00f3dulos sudo a2enmod rewrite headers ssl #Activar soporte para el puerto SSL sudo a2ensite default-ssl.conf #Reiniciar sudo service apache2 restart #Paquetes \u00fatiles para el entorno sudo apt install curl zip unzip openssl git wget","title":"Intalaci\u00f3n"},{"location":"lamp/content/Apache/#configuraciones-generales","text":"#Mover a carpeta de apache cd /etc/apache2/ #Respaldar archivo de configuraci\u00f3n por defecto cp apache2.conf apache2.conf.bk #Permitir .htaccess sudo nano apache.conf ### En la configuraci\u00f3n de Directory /var/www/ cambiar AllowOverride None por AllowOverride All ### Guardar y reinicias servidor sudo service apache2 restart","title":"Configuraciones generales"},{"location":"lamp/content/MariaDB/","text":"Instalaci\u00f3n de MariaDB 10.5 Ubuntu 20 MariaDB 10.5 Actualizar repositorios sudo apt-get install software-properties-common sudo apt-key adv --fetch-keys 'https://mariadb.org/mariadb_release_signing_key.asc' sudo add-apt-repository 'deb [arch=amd64,arm64,ppc64el] http://mirror.ufscar.br/mariadb/repo/10.5/ubuntu focal main' Instalaci\u00f3n sudo apt update sudo apt install mariadb-server mariadb-client Configuraci\u00f3n de usuario #Moverse al directorio de usuario cd ~ #Modo de super usuario sudo su #Medidas de seguridad mysql_secure_installation #prompt: Enter current password for root (enter for none): (PRESIONA ENTER) #prompt: Switch to unix_socket authentication [Y/n]: n #prompt: Change the root password? [Y/n]: n (El usuario root quedar\u00e1 sin contrase\u00f1a porque es preferible no usarlo por seguridad.) #prompt: Remove anonymous users? [Y/n]: Y #prompt: Disallow root login remotely? [Y/n]: Y (Desactivar conexiones externas) #prompt: Remove test database and access to it? [Y/n]: Y #prompt: Reload privilege tables now? [Y/n]: Y #Entrar en consola de mariadb mysql -- Crear general (el usuario y la contrase\u00f1a son de ejemplo): CREATE USER 'admin_general'@'localhost' IDENTIFIED BY 'pPz_afcad6464e_lr_m646464am'; -- Otorgar permisos globales al usuario GRANT ALL PRIVILEGES ON *.* TO 'admin_general'@'localhost'; -- Refrescar privilegios: FLUSH PRIVILEGES; -- Salir de la consola de mariadb exit; #Salir del modo de super usuario exit","title":"MariaDB"},{"location":"lamp/content/MariaDB/#instalacion-de-mariadb-105","text":"Ubuntu 20 MariaDB 10.5","title":"Instalaci\u00f3n de MariaDB 10.5"},{"location":"lamp/content/MariaDB/#actualizar-repositorios","text":"sudo apt-get install software-properties-common sudo apt-key adv --fetch-keys 'https://mariadb.org/mariadb_release_signing_key.asc' sudo add-apt-repository 'deb [arch=amd64,arm64,ppc64el] http://mirror.ufscar.br/mariadb/repo/10.5/ubuntu focal main'","title":"Actualizar repositorios"},{"location":"lamp/content/MariaDB/#instalacion","text":"sudo apt update sudo apt install mariadb-server mariadb-client","title":"Instalaci\u00f3n"},{"location":"lamp/content/MariaDB/#configuracion-de-usuario","text":"#Moverse al directorio de usuario cd ~ #Modo de super usuario sudo su #Medidas de seguridad mysql_secure_installation #prompt: Enter current password for root (enter for none): (PRESIONA ENTER) #prompt: Switch to unix_socket authentication [Y/n]: n #prompt: Change the root password? [Y/n]: n (El usuario root quedar\u00e1 sin contrase\u00f1a porque es preferible no usarlo por seguridad.) #prompt: Remove anonymous users? [Y/n]: Y #prompt: Disallow root login remotely? [Y/n]: Y (Desactivar conexiones externas) #prompt: Remove test database and access to it? [Y/n]: Y #prompt: Reload privilege tables now? [Y/n]: Y #Entrar en consola de mariadb mysql -- Crear general (el usuario y la contrase\u00f1a son de ejemplo): CREATE USER 'admin_general'@'localhost' IDENTIFIED BY 'pPz_afcad6464e_lr_m646464am'; -- Otorgar permisos globales al usuario GRANT ALL PRIVILEGES ON *.* TO 'admin_general'@'localhost'; -- Refrescar privilegios: FLUSH PRIVILEGES; -- Salir de la consola de mariadb exit; #Salir del modo de super usuario exit","title":"Configuraci\u00f3n de usuario"},{"location":"lamp/content/PHP/","text":"Instalaci\u00f3n de PHP 7.3 (probado tambi\u00e9n con 7.4, 7.1) Ubuntu 20 PHP 7.3 Composer Actualizar repositorios sudo apt-get update sudo apt -y install software-properties-common sudo add-apt-repository ppa:ondrej/php sudo apt-get update Intalaci\u00f3n #Moverse al directorio de usuario cd ~ #Instalar php sudo apt install php7.3 #Reiniciar apache sudo service apache2 restart #Cambiar alternativa de php en consola (opcional si no ocurri\u00f3 autom\u00e1ticamente): sudo update-alternatives --config php #Instalar extensiones PHP sudo apt install php7.3-{common,pdo,xml,ctype,mbstring,fileinfo,gd,mysqli,sqlite3,zip,xsl,xmlwriter,xmlreader,curl} ##Si se decidi\u00f3 por PHP 7.1 sudo apt install php7.1-{common,pdo,xml,ctype,mbstring,fileinfo,gd,mysqli,sqlite3,zip,xsl,xmlwriter,xmlreader,curl,mcrypt} Activaci\u00f3n #Activar versi\u00f3n en apache sudo a2dismod php5* php7* sudo a2enmod php7.3 sudo service apache2 restart Instalar Composer (globalmente) php -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\" php composer-setup.php php -r \"unlink('composer-setup.php');\" mv composer.phar /usr/local/bin/composer","title":"PHP"},{"location":"lamp/content/PHP/#instalacion-de-php-73","text":"(probado tambi\u00e9n con 7.4, 7.1) Ubuntu 20 PHP 7.3 Composer","title":"Instalaci\u00f3n de PHP 7.3"},{"location":"lamp/content/PHP/#actualizar-repositorios","text":"sudo apt-get update sudo apt -y install software-properties-common sudo add-apt-repository ppa:ondrej/php sudo apt-get update","title":"Actualizar repositorios"},{"location":"lamp/content/PHP/#intalacion","text":"#Moverse al directorio de usuario cd ~ #Instalar php sudo apt install php7.3 #Reiniciar apache sudo service apache2 restart #Cambiar alternativa de php en consola (opcional si no ocurri\u00f3 autom\u00e1ticamente): sudo update-alternatives --config php #Instalar extensiones PHP sudo apt install php7.3-{common,pdo,xml,ctype,mbstring,fileinfo,gd,mysqli,sqlite3,zip,xsl,xmlwriter,xmlreader,curl} ##Si se decidi\u00f3 por PHP 7.1 sudo apt install php7.1-{common,pdo,xml,ctype,mbstring,fileinfo,gd,mysqli,sqlite3,zip,xsl,xmlwriter,xmlreader,curl,mcrypt}","title":"Intalaci\u00f3n"},{"location":"lamp/content/PHP/#activacion","text":"#Activar versi\u00f3n en apache sudo a2dismod php5* php7* sudo a2enmod php7.3 sudo service apache2 restart","title":"Activaci\u00f3n"},{"location":"lamp/content/PHP/#instalar-composer-globalmente","text":"php -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\" php composer-setup.php php -r \"unlink('composer-setup.php');\" mv composer.phar /usr/local/bin/composer","title":"Instalar Composer (globalmente)"},{"location":"lamp/content/PHPMyAdmin/","text":"PHPMyAdmin 4.9.2 Ubuntu 20 PHPMyAdmin 4.9.2 Instalaci\u00f3n # Moverse al directorio de usuario cd ~ #Configurar algunas variables \u00fatiles ###La carpeta p\u00fablica export CARPETA_DE_INSTALACION=\"/var/www/html\" #Descargar wget https://files.phpmyadmin.net/phpMyAdmin/4.9.2/phpMyAdmin-4.9.2-all-languages.zip #Moverse a carpeta de instalaci\u00f3n cd $CARPETA_DE_INSTALACION #Descomprimir sudo unzip ~/phpMyAdmin-4.9.2-all-languages.zip -d . #Borrar zip rm ~/phpMyAdmin-4.9.2-all-languages.zip #Renombrar sudo mv phpMyAdmin-4.9.2-all-languages phpmyadmin #Configuraci\u00f3n cd phpmyadmin sudo cp config.sample.inc.php config.inc.php #Configurar blowfish sudo nano config.inc.php ###Para habilitar login sin contrase\u00f1a (no recomendado en producci\u00f3n): Configurar opci\u00f3n AllowNoPassword en true #Subir de directorio cd .. #Aplicar permisos a la carpeta de phpmyadmin sudo chmod -R 0755 phpmyadmin sudo chmod -R 0755 phpmyadmin/* sudo mkdir phpmyadmin/tmp sudo chmod -R 0777 phpmyadmin/tmp #Ajustar propietario (puede verificar el due\u00f1o del directorio p\u00fablico con: ps aux | egrep '(apache|httpd|www)') sudo chown -R www-data:www-data phpmyadmin sudo chown -R www-data:www-data phpmyadmin/* #Borrar setup por seguridad sudo rm -Rf phpmyadmin/setup","title":"PHPMyAdmin"},{"location":"lamp/content/PHPMyAdmin/#phpmyadmin-492","text":"Ubuntu 20 PHPMyAdmin 4.9.2","title":"PHPMyAdmin 4.9.2"},{"location":"lamp/content/PHPMyAdmin/#instalacion","text":"# Moverse al directorio de usuario cd ~ #Configurar algunas variables \u00fatiles ###La carpeta p\u00fablica export CARPETA_DE_INSTALACION=\"/var/www/html\" #Descargar wget https://files.phpmyadmin.net/phpMyAdmin/4.9.2/phpMyAdmin-4.9.2-all-languages.zip #Moverse a carpeta de instalaci\u00f3n cd $CARPETA_DE_INSTALACION #Descomprimir sudo unzip ~/phpMyAdmin-4.9.2-all-languages.zip -d . #Borrar zip rm ~/phpMyAdmin-4.9.2-all-languages.zip #Renombrar sudo mv phpMyAdmin-4.9.2-all-languages phpmyadmin #Configuraci\u00f3n cd phpmyadmin sudo cp config.sample.inc.php config.inc.php #Configurar blowfish sudo nano config.inc.php ###Para habilitar login sin contrase\u00f1a (no recomendado en producci\u00f3n): Configurar opci\u00f3n AllowNoPassword en true #Subir de directorio cd .. #Aplicar permisos a la carpeta de phpmyadmin sudo chmod -R 0755 phpmyadmin sudo chmod -R 0755 phpmyadmin/* sudo mkdir phpmyadmin/tmp sudo chmod -R 0777 phpmyadmin/tmp #Ajustar propietario (puede verificar el due\u00f1o del directorio p\u00fablico con: ps aux | egrep '(apache|httpd|www)') sudo chown -R www-data:www-data phpmyadmin sudo chown -R www-data:www-data phpmyadmin/* #Borrar setup por seguridad sudo rm -Rf phpmyadmin/setup","title":"Instalaci\u00f3n"},{"location":"lamp/content/SSL%20con%20Lets%20Encrypt/","text":"Soporte de SSL con Lets Encrypt (LE) en apache2 (probado en Debian 9) Nota: La informaci\u00f3n es sacada de snel.com # Instalar el cerbot de LE apt install certbot python3-certbot-apache #Generar certificados certbot --apache #Nota: Probablemente se presente un error con la configuraci\u00f3n de vhost ssl Configurar el vhost ssl con las siguiente informaci\u00f3n <VirtualHost _default_:443> ... SSLCertificateFile /etc/letsencrypt/live/DOMINIO/cert.pem SSLCertificateKeyFile /etc/letsencrypt/live/DOMINIO/privkey.pem SSLCertificateChainFile /etc/letsencrypt/live/DOMINIO/chain.pem ... </VirtualHost> #Revisar sintaxis apache apachectl configtest #Activar m\u00f3dulo SSL a2enmod ssl #Recargar servidor service apache2 reload #Configurar renovaci\u00f3n autom\u00e1tica sudo certbot renew --dry-run Forzar https siempre #Activar m\u00f3dulo rewrite a2enmod rewrite Modificar configuraci\u00f3n de vhost (NO SSL) para que redireccione <VirtualHost _default_:80> ... Redirect permanent / https://DOMINIO.COM/ ... </VirtualHost> #Recarcar servidor service apache2 reload","title":"SSL con Lets Encrypt"},{"location":"lamp/content/SSL%20con%20Lets%20Encrypt/#soporte-de-ssl-con-lets-encrypt-le-en-apache2","text":"(probado en Debian 9) Nota: La informaci\u00f3n es sacada de snel.com # Instalar el cerbot de LE apt install certbot python3-certbot-apache #Generar certificados certbot --apache #Nota: Probablemente se presente un error con la configuraci\u00f3n de vhost ssl Configurar el vhost ssl con las siguiente informaci\u00f3n <VirtualHost _default_:443> ... SSLCertificateFile /etc/letsencrypt/live/DOMINIO/cert.pem SSLCertificateKeyFile /etc/letsencrypt/live/DOMINIO/privkey.pem SSLCertificateChainFile /etc/letsencrypt/live/DOMINIO/chain.pem ... </VirtualHost> #Revisar sintaxis apache apachectl configtest #Activar m\u00f3dulo SSL a2enmod ssl #Recargar servidor service apache2 reload #Configurar renovaci\u00f3n autom\u00e1tica sudo certbot renew --dry-run","title":"Soporte de SSL con Lets Encrypt (LE) en apache2"},{"location":"lamp/content/SSL%20con%20Lets%20Encrypt/#forzar-https-siempre","text":"#Activar m\u00f3dulo rewrite a2enmod rewrite Modificar configuraci\u00f3n de vhost (NO SSL) para que redireccione <VirtualHost _default_:80> ... Redirect permanent / https://DOMINIO.COM/ ... </VirtualHost> #Recarcar servidor service apache2 reload","title":"Forzar https siempre"},{"location":"lamp/content/Virtual%20Hosts/","text":"A\u00f1adir soporte de dominios en apache2 (funciona para ssl, hacer los mismos pasos con el archivo default-ssl.conf) (Debian 9) Nota: La informaci\u00f3n es sacada de DigitalOcean Crear el archivo de configuraci\u00f3n cd /etc/apache2/sites-available cp 000-default.conf DOMINIO.COM.conf La informaci\u00f3n de DOMINIO.COM.conf es algo como lo siguiente <VirtualHost *:80> ServerAdmin webmaster@localhost DocumentRoot /var/www/html ErrorLog ${APACHE_LOG_DIR}/error.log CustomLog ${APACHE_LOG_DIR}/access.log combined </VirtualHost> Modificar informaci\u00f3n nano DOMINIO.COM.conf <VirtualHost *:80> ... ServerAdmin admin@DOMINIO.COM #Opcional ServerName DOMINIO.COM ServerAlias www.DOMINIO.COM DocumentRoot /var/www/DOMINIO.COM/public_html ... </VirtualHost> Activar vhost y desactivar configuraci\u00f3n por defecto a2ensite DOMINIO.COM.conf a2dissite 000-default.conf Reinicar servidor service apache2 restart","title":"Virtual Hosts - Soporte para dominios"},{"location":"lamp/content/Virtual%20Hosts/#anadir-soporte-de-dominios-en-apache2","text":"(funciona para ssl, hacer los mismos pasos con el archivo default-ssl.conf) (Debian 9) Nota: La informaci\u00f3n es sacada de DigitalOcean Crear el archivo de configuraci\u00f3n cd /etc/apache2/sites-available cp 000-default.conf DOMINIO.COM.conf La informaci\u00f3n de DOMINIO.COM.conf es algo como lo siguiente <VirtualHost *:80> ServerAdmin webmaster@localhost DocumentRoot /var/www/html ErrorLog ${APACHE_LOG_DIR}/error.log CustomLog ${APACHE_LOG_DIR}/access.log combined </VirtualHost> Modificar informaci\u00f3n nano DOMINIO.COM.conf <VirtualHost *:80> ... ServerAdmin admin@DOMINIO.COM #Opcional ServerName DOMINIO.COM ServerAlias www.DOMINIO.COM DocumentRoot /var/www/DOMINIO.COM/public_html ... </VirtualHost> Activar vhost y desactivar configuraci\u00f3n por defecto a2ensite DOMINIO.COM.conf a2dissite 000-default.conf Reinicar servidor service apache2 restart","title":"A\u00f1adir soporte de dominios en apache2"},{"location":"piecesphp/","text":"PiecesPHP Framework Requerimientos PiecesPHP Composer NodeJS 12.x LTS NPM Gulp CLI Actualizar repositorios #Integrar respositorio curl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash - #Actualizar sudo apt update Instalaci\u00f3n de dependencias de desarrollo Composer Mediante apt: #Instalar sudo apt install composer #Verificar versi\u00f3n composer --version ##1.10.1 Mediante descarga: php -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\" php composer-setup.php php -r \"unlink('composer-setup.php');\" mv composer.phar /usr/local/bin/composer ##Para que est\u00e9 disponible globalmente NodeJS y NPM #Instalar sudo apt install nodejs #Verificar versiones node --version ##v12.18.4 npm --version ##6.14.6 Gulp CLI #Instalar globalmente sudo npm install -g gulp-cli #Verificar versi\u00f3n gulp --version ##CLI version: 2.3.0 Desplegar PiecesPHP #Variables export RAIZ_DESPLIEGUE=\"/var/www/html\" export CARPETA=\"pcsphp-project\" #Moverse a la carpeta ra\u00edz cd $RAIZ_DESPLIEGUE #Descargar wget -O $CARPETA.zip https://bitbucket.org/piecesphp/piecesphp/get/last-stable.zip #Descomprimir unzip $CARPETA.zip -d $CARPETA #Moverse a la carpeta del proyecto cd $RAIZ_DESPLIEGUE/$CARPETA #Renombrar carpeta find . -depth -type d -name * -execdir mv {} tmp \\; cd $RAIZ_DESPLIEGUE/$CARPETA/tmp sudo mv ./{*,.*} ../ ##Se obtendr\u00e1 un error por los meta archivos . y .., no es importante. #Borrar elementos innecesarios cd $RAIZ_DESPLIEGUE/$CARPETA sudo rm -Rf tmp CHANGELOG.md README.md TODO TODO.md guides source-docs #Ajustar permisos sudo chmod -Rf 0777 src #Instalar gulp para desarrollo cd $RAIZ_DESPLIEGUE/$CARPETA npm install ##NO USAR sudo #Instalar paquetes de composer cd $RAIZ_DESPLIEGUE/$CARPETA/src composer install ##NO USAR sudo Activaci\u00f3n de m\u00f3dulos apache necesarios sudo a2enmod rewrite headers ssl M\u00e1s informaci\u00f3n Existen las siguientes tareas en Gulp (dentro de src): gulp sass:init (para compilar los archivos en src/statics/sass) gulp sass:watch (para observar los archivos en src/statics/sass) gulp sass-vendor:init (para compilar los archivos de estilo del \u00e1rea administrativa) gulp sass-vendor:watch (para observar los archivos de estilo del \u00e1rea administrativa) Base de datos: Se debe configurar la conexi\u00f3n en el archivo src/app/database.php Los archivos para usar en la base de datos est\u00e1n en la carpeta databases Otras cosas: En el archivo src/app/constants.php se pueden activar/desactivar algunas caracter\u00edsticas que el framewok tiene integradas como Blog, Carga de im\u00e1genes, etc... Comentarios adicionales Viene por defecto con una integraci\u00f3n de la plantilla Editorial de HTML5UP .","title":"Contenido"},{"location":"piecesphp/#piecesphp-framework","text":"Requerimientos PiecesPHP Composer NodeJS 12.x LTS NPM Gulp CLI","title":"PiecesPHP Framework"},{"location":"piecesphp/#actualizar-repositorios","text":"#Integrar respositorio curl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash - #Actualizar sudo apt update","title":"Actualizar repositorios"},{"location":"piecesphp/#instalacion-de-dependencias-de-desarrollo","text":"","title":"Instalaci\u00f3n de dependencias de desarrollo"},{"location":"piecesphp/#composer","text":"Mediante apt: #Instalar sudo apt install composer #Verificar versi\u00f3n composer --version ##1.10.1 Mediante descarga: php -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\" php composer-setup.php php -r \"unlink('composer-setup.php');\" mv composer.phar /usr/local/bin/composer ##Para que est\u00e9 disponible globalmente","title":"Composer"},{"location":"piecesphp/#nodejs-y-npm","text":"#Instalar sudo apt install nodejs #Verificar versiones node --version ##v12.18.4 npm --version ##6.14.6","title":"NodeJS y NPM"},{"location":"piecesphp/#gulp-cli","text":"#Instalar globalmente sudo npm install -g gulp-cli #Verificar versi\u00f3n gulp --version ##CLI version: 2.3.0","title":"Gulp CLI"},{"location":"piecesphp/#desplegar-piecesphp","text":"#Variables export RAIZ_DESPLIEGUE=\"/var/www/html\" export CARPETA=\"pcsphp-project\" #Moverse a la carpeta ra\u00edz cd $RAIZ_DESPLIEGUE #Descargar wget -O $CARPETA.zip https://bitbucket.org/piecesphp/piecesphp/get/last-stable.zip #Descomprimir unzip $CARPETA.zip -d $CARPETA #Moverse a la carpeta del proyecto cd $RAIZ_DESPLIEGUE/$CARPETA #Renombrar carpeta find . -depth -type d -name * -execdir mv {} tmp \\; cd $RAIZ_DESPLIEGUE/$CARPETA/tmp sudo mv ./{*,.*} ../ ##Se obtendr\u00e1 un error por los meta archivos . y .., no es importante. #Borrar elementos innecesarios cd $RAIZ_DESPLIEGUE/$CARPETA sudo rm -Rf tmp CHANGELOG.md README.md TODO TODO.md guides source-docs #Ajustar permisos sudo chmod -Rf 0777 src #Instalar gulp para desarrollo cd $RAIZ_DESPLIEGUE/$CARPETA npm install ##NO USAR sudo #Instalar paquetes de composer cd $RAIZ_DESPLIEGUE/$CARPETA/src composer install ##NO USAR sudo","title":"Desplegar PiecesPHP"},{"location":"piecesphp/#activacion-de-modulos-apache-necesarios","text":"sudo a2enmod rewrite headers ssl","title":"Activaci\u00f3n de m\u00f3dulos apache necesarios"},{"location":"piecesphp/#mas-informacion","text":"Existen las siguientes tareas en Gulp (dentro de src): gulp sass:init (para compilar los archivos en src/statics/sass) gulp sass:watch (para observar los archivos en src/statics/sass) gulp sass-vendor:init (para compilar los archivos de estilo del \u00e1rea administrativa) gulp sass-vendor:watch (para observar los archivos de estilo del \u00e1rea administrativa) Base de datos: Se debe configurar la conexi\u00f3n en el archivo src/app/database.php Los archivos para usar en la base de datos est\u00e1n en la carpeta databases Otras cosas: En el archivo src/app/constants.php se pueden activar/desactivar algunas caracter\u00edsticas que el framewok tiene integradas como Blog, Carga de im\u00e1genes, etc...","title":"M\u00e1s informaci\u00f3n"},{"location":"piecesphp/#comentarios-adicionales","text":"Viene por defecto con una integraci\u00f3n de la plantilla Editorial de HTML5UP .","title":"Comentarios adicionales"},{"location":"tomcat/","text":"Instalaci\u00f3n de Tomcat 8 con SSL Probado en Debian 9 # Crear directorio mkdir /tomcat cd /tomcat # Descargar tomcat 8 wget https://www-eu.apache.org/dist/tomcat/tomcat-8/v8.5.50/bin/apache-tomcat-8.5.50.tar.gz tar xvzf apache-tomcat-8.5.50.tar.gz rm apache-tomcat-8.5.50.tar.gz cd apache-tomcat-8.5.50 mv * ../ cd .. #Verificar o instalar java java -version apt install default-jdk default-jre #Verificar el JAVA_HOME update-alternatives --config java # Configurar variables de entorno nano ~/.bashrc export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64 export CATALINA_HOME=/tomcat # Activar tomcat /tomcat/bin/startup.sh #Cambiar a puerto 80: <Connector port=\"8080\" a \"80\" y <Connector ... redirectPort=\"8443\" a \"443\" nano /tomcat/conf/server.xml ##Descomentar/Agregar AUTHBIND=yes nano /etc/default/tomcat7 ##Configurar authbind apt install authbind touch /etc/authbind/byport/80 chmod 500 /etc/authbind/byport/80 chown root /etc/authbind/byport/80 touch /etc/authbind/byport/443 chmod 500 /etc/authbind/byport/443 chown root /etc/authbind/byport/443 /tomcat/bin/shutdown.sh /tomcat/bin/startup.sh Configurar Let\u00b4s Encrypt #Paquetes apt install openssl letsencrypt certbot wget https://dl.eff.org/certbot-auto -P /usr/local/bin chmod a+x /usr/local/bin/certbot-auto #Configurar variable \u00fatiles export DOMAIN_TOMCAT_I=\"DOMINIO.COM\" export EMAIL_ALERT_TOMCAT_I=\"admin@webmaster\" export PASS_SSL_TOMCAT_I=\"CONTRASENNA\" export ALIAS_SSL_TOMCAT_I=\"tomcat_let\" #Crear certificado certbot-auto certonly --standalone -d $DOMAIN_TOMCAT_I --preferred-challenges http --agree-tos -n -m $EMAIL_ALERT_TOMCAT_I --keep-until-expiring certbot-auto renew openssl pkcs12 -export -out /etc/letsencrypt/fullchain.p12 -in /etc/letsencrypt/live/$DOMAIN_TOMCAT_I/fullchain.pem -inkey /etc/letsencrypt/live/$DOMAIN_TOMCAT_I/privkey.pem -name $ALIAS_SSL_TOMCAT_I keytool -importkeystore -deststorepass $PASS_SSL_TOMCAT_I -destkeypass $PASS_SSL_TOMCAT_I -destkeystore /etc/letsencrypt/$DOMAIN_TOMCAT_I.jks -srckeystore /etc/letsencrypt/fullchain.p12 -srcstoretype PKCS12 -srcstorepass $PASS_SSL_TOMCAT_I -alias $ALIAS_SSL_TOMCAT_I #Configurar servidor nano /tomcat/conf/server.xml <Connector executor=\"tomcatThreadPool\" ... /> ... <Connector port=\"443\" protocol=\"org.apache.coyote.http11.Http11Protocol\" maxThreads=\"150\" SSLEnabled=\"true\" scheme=\"https\" secure=\"true\" keystoreFile=\"/etc/letsencrypt/DOMINIO.COM.jks\" keystorePass=\"CONTRASENNA\" clientAuth=\"false\" sslProtocol=\"TLS\" /> #Reiniciar servidor /tomcat/bin/shutdown.sh /tomcat/bin/startup.sh Habilitar CORS nano /tomcat/conf/web.xml <filter> <filter-name>CorsFilter</filter-name> <filter-class>org.apache.catalina.filters.CorsFilter</filter-class> <init-param> <param-name>cors.allowed.origins</param-name> <param-value>*</param-value> </init-param> </filter> <filter-mapping> <filter-name>CorsFilter</filter-name> <url-pattern>/*</url-pattern> </filter-mapping> #Reiniciar servidor /tomcat/bin/shutdown.sh /tomcat/bin/startup.sh Asignar m\u00e1s memoria #A\u00f1adir export JAVA_OPTS=\"-Djava.awt.headless=true -Xms1024m -Xmx1024m\" nano /tomcat/bin/setenv.sh #Reiniciar servidor /tomcat/bin/shutdown.sh /tomcat/bin/startup.sh","title":"Contenido"},{"location":"tomcat/#instalacion-de-tomcat-8-con-ssl","text":"Probado en Debian 9 # Crear directorio mkdir /tomcat cd /tomcat # Descargar tomcat 8 wget https://www-eu.apache.org/dist/tomcat/tomcat-8/v8.5.50/bin/apache-tomcat-8.5.50.tar.gz tar xvzf apache-tomcat-8.5.50.tar.gz rm apache-tomcat-8.5.50.tar.gz cd apache-tomcat-8.5.50 mv * ../ cd .. #Verificar o instalar java java -version apt install default-jdk default-jre #Verificar el JAVA_HOME update-alternatives --config java # Configurar variables de entorno nano ~/.bashrc export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64 export CATALINA_HOME=/tomcat # Activar tomcat /tomcat/bin/startup.sh #Cambiar a puerto 80: <Connector port=\"8080\" a \"80\" y <Connector ... redirectPort=\"8443\" a \"443\" nano /tomcat/conf/server.xml ##Descomentar/Agregar AUTHBIND=yes nano /etc/default/tomcat7 ##Configurar authbind apt install authbind touch /etc/authbind/byport/80 chmod 500 /etc/authbind/byport/80 chown root /etc/authbind/byport/80 touch /etc/authbind/byport/443 chmod 500 /etc/authbind/byport/443 chown root /etc/authbind/byport/443 /tomcat/bin/shutdown.sh /tomcat/bin/startup.sh","title":"Instalaci\u00f3n de Tomcat 8 con SSL"},{"location":"tomcat/#configurar-let-s-encrypt","text":"#Paquetes apt install openssl letsencrypt certbot wget https://dl.eff.org/certbot-auto -P /usr/local/bin chmod a+x /usr/local/bin/certbot-auto #Configurar variable \u00fatiles export DOMAIN_TOMCAT_I=\"DOMINIO.COM\" export EMAIL_ALERT_TOMCAT_I=\"admin@webmaster\" export PASS_SSL_TOMCAT_I=\"CONTRASENNA\" export ALIAS_SSL_TOMCAT_I=\"tomcat_let\" #Crear certificado certbot-auto certonly --standalone -d $DOMAIN_TOMCAT_I --preferred-challenges http --agree-tos -n -m $EMAIL_ALERT_TOMCAT_I --keep-until-expiring certbot-auto renew openssl pkcs12 -export -out /etc/letsencrypt/fullchain.p12 -in /etc/letsencrypt/live/$DOMAIN_TOMCAT_I/fullchain.pem -inkey /etc/letsencrypt/live/$DOMAIN_TOMCAT_I/privkey.pem -name $ALIAS_SSL_TOMCAT_I keytool -importkeystore -deststorepass $PASS_SSL_TOMCAT_I -destkeypass $PASS_SSL_TOMCAT_I -destkeystore /etc/letsencrypt/$DOMAIN_TOMCAT_I.jks -srckeystore /etc/letsencrypt/fullchain.p12 -srcstoretype PKCS12 -srcstorepass $PASS_SSL_TOMCAT_I -alias $ALIAS_SSL_TOMCAT_I #Configurar servidor nano /tomcat/conf/server.xml <Connector executor=\"tomcatThreadPool\" ... /> ... <Connector port=\"443\" protocol=\"org.apache.coyote.http11.Http11Protocol\" maxThreads=\"150\" SSLEnabled=\"true\" scheme=\"https\" secure=\"true\" keystoreFile=\"/etc/letsencrypt/DOMINIO.COM.jks\" keystorePass=\"CONTRASENNA\" clientAuth=\"false\" sslProtocol=\"TLS\" /> #Reiniciar servidor /tomcat/bin/shutdown.sh /tomcat/bin/startup.sh","title":"Configurar Let\u00b4s Encrypt"},{"location":"tomcat/#habilitar-cors","text":"nano /tomcat/conf/web.xml <filter> <filter-name>CorsFilter</filter-name> <filter-class>org.apache.catalina.filters.CorsFilter</filter-class> <init-param> <param-name>cors.allowed.origins</param-name> <param-value>*</param-value> </init-param> </filter> <filter-mapping> <filter-name>CorsFilter</filter-name> <url-pattern>/*</url-pattern> </filter-mapping> #Reiniciar servidor /tomcat/bin/shutdown.sh /tomcat/bin/startup.sh","title":"Habilitar CORS"},{"location":"tomcat/#asignar-mas-memoria","text":"#A\u00f1adir export JAVA_OPTS=\"-Djava.awt.headless=true -Xms1024m -Xmx1024m\" nano /tomcat/bin/setenv.sh #Reiniciar servidor /tomcat/bin/shutdown.sh /tomcat/bin/startup.sh","title":"Asignar m\u00e1s memoria"}]}